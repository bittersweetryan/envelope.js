/*! envelope.js - v0.2.2 - 2012-12-11
* http://bittersweetryan.github.com/envelope.js
* Copyright (c) 2012 Ryan Anklam; Licensed  */
(function(e,t,n,r){"use strict";var i={add:function(r){var i,s=this,o=null;return r=e.extend({},f,r),u.uiFramework.search(new RegExp("jqueryui","i"))===0?o="jqueryui":u.uiFramework.search(new RegExp("bootstrap","i"))===0?o="bootstrap":u.uiFramework.search(new RegExp("foundation","i"))===0?o="foundation":o="envelope",i=c(o,r.type,r.message,r.addCloseButton),i.hide(),e(n).on(r.name,function(n,o){if(o){var a=i.find(".message");a.html(a.html()+" "+o)}s.append(i),i.fadeIn("slow");if(r.autoClose)var f=t.setTimeout(function(){i.fadeOut("slow",function(){e(this).remove()}),t.clearTimeout(f)},u.autoCloseTimeout);r.callback&&typeof r.callback=="function"&&r.callback()}),this},remove:function(t){return e(n).off(t)}},s={},o,u,a={uiFramework:"none",autoCloseTimeout:5e3},f={type:"info",autoClose:!1,addCloseButton:!1,callback:r},l={jqueryui:{ele:'<p><span class="ui-icon" style="float: left; margin-right: .3em;"></span><span class="message"></span></p>',successClass:"ui-icon-info",errorClass:"ui-icon-error",infoClass:"ui-icon-info",closeButton:'<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick" style="float: right">close</span></a>',addToSelector:"span:first",addCloseEvent:function(){e(this).on("click",function(){e(this).parent().parent().fadeOut("slow")})}},bootstrap:{ele:'<div class="alert"><span class="message"></span></div>',successClass:"alert-success",errorClass:"alert-error",infoClass:"alert-info",closeButton:'<button class="close" data-dismiss="alert">x</button>',addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}},foundation:{ele:'<div class="alert-box"><span class="message"></span></div>',successClass:"success",errorClass:"alert",infoClass:null,closeButton:'<a class="close">x</a>',addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}},envelope:{ele:'<div class="env_container"><span class="message">Hello World</span></div>',successClass:"success",errorClass:"error",infoClass:null,closeButton:e('<div class="close">&times;</div>'),addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}}},c=function(t,n,r,i){var s=e(l[t].ele),o=l[t].addToSelector,u=null;o!==null?u=s.find(o):u=s,n==="error"?u.addClass(l[t].errorClass):n==="info"?l[t].infoClass&&u.addClass(l[t].infoClass):u.addClass(l[t].successClass);if(i){var a=e(l[t].closeButton).clone();l[t].addCloseEvent&&l[t].addCloseEvent.call(a),s.append(a)}return s.find("span.message").html(r),s};e.fn.envelope=function(t,n){var r=e(this),o;return typeof t=="string"&&i[t]?(o=t,i[o].apply(r,Array.prototype.slice.call(arguments,1))):(e.isArray(t)&&(n=t),s=e.extend({},s,n),typeof t=="object"&&(u=e.extend({},a,t)),e.isArray(n)&&e.each(s,function(e,t){typeof t=="object"&&t.hasOwnProperty("name")&&i.add.call(r,t)}),this)}})(jQuery,window,window.document);