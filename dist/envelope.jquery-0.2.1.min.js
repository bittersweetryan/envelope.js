/*! envelope.js - v0.2.1 - 2012-12-04
* http://bittersweetryan.github.com/envelope.js
* Copyright (c) 2012 Ryan Anklam; Licensed  */
(function(e,t,n,r){"use strict";var i={add:function(t){var r,i=this,s=null;return t=e.extend({},f,t),u.uiFramework.search(new RegExp("jqueryui","i"))===0?s="jqueryui":u.uiFramework.search(new RegExp("bootstrap","i"))===0?s="bootstrap":u.uiFramework.search(new RegExp("foundation","i"))===0?s="foundation":s="envelope",r=c(s,t.type,t.message,t.addCloseButton),r.hide(),e(n).on(t.name,function(n,s){if(s){var o=r.find(".message");o.html(o.html()+" "+s)}i.append(r),r.fadeIn("slow");if(t.autoClose)var a=setTimeout(function(){r.fadeOut("slow",function(){e(this).remove()}),clearTimeout(a)},u.autoCloseTimeout);t.callback&&typeof t.callback=="function"&&t.callback()}),this},remove:function(t){return e(n).off(t)}},s={},o,u,a={uiFramework:"none",autoCloseTimeout:5e3},f={type:"info",autoClose:!1,addCloseButton:!1,callback:r},l={jqueryui:{ele:e('<p><span class="ui-icon" style="float: left; margin-right: .3em;"></span><span class="message"></span></p>'),successClass:"ui-icon-info",errorClass:"ui-icon-error",infoClass:"ui-icon-info",closeButton:'<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick" style="float: right">close</span></a>',addToSelector:"span:first",addCloseEvent:function(){e(this).on("click",function(){e(this).parent().parent().fadeOut("slow")})}},bootstrap:{ele:e('<div class="alert"><span class="message"></span></div>'),successClass:"alert-success",errorClass:"alert-error",infoClass:"alert-info",closeButton:'<button class="close" data-dismiss="alert">x</button>',addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}},foundation:{ele:e('<div class="alert-box"><span class="message"></span></div>'),successClass:"success",errorClass:"alert",infoClass:null,closeButton:'<a class="close">x</a>',addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}},envelope:{ele:e('<div class="env_container"><span class="message">Hello World</span></div>'),successClass:"success",errorClass:"error",infoClass:null,closeButton:e('<div class="close">&times;</div>'),addToSelector:null,addCloseEvent:function(){e(this).on("click",function(){e(this).parent().fadeOut("slow")})}}},c=function(t,n,r,i){var s=l[t].ele.clone(),o=l[t].addToSelector,u=null;o!==null?u=s.find(o):u=s,n==="error"?u.addClass(l[t].errorClass):n==="info"?l[t].infoClass&&u.addClass(l[t].infoClass):u.addClass(l[t].successClass);if(i){var a=e(l[t].closeButton).clone();l[t].addCloseEvent&&l[t].addCloseEvent.call(a),s.append(a)}return s.find("span.message").html(r),s};e.fn.envelope=function(t,n){var r=e(this),o;return typeof t=="string"&&i[t]?(o=t,i[o].apply(r,Array.prototype.slice.call(arguments,1))):(e.isArray(t)&&(n=t),s=e.extend({},s,n),typeof t=="object"&&(u=e.extend({},a,t)),e.isArray(n)&&e.each(s,function(e,t){typeof t=="object"&&t.hasOwnProperty("name")&&i.add.call(r,t)}),this)}})(jQuery,window,window.document);